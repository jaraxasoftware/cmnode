version: 1.0
type: module
category: ui
name: apps_ui
spec:
  init:
    model:
      object:
        apps: 
          list: []
        nodes:
          list: []
  update:
    apps:
      model:
        object:
          apps:
            key: data
            in: 
              key: data
      cmds:
        - effect: ui
          encoder: apps_view
    show_apps:
      cmds:
        - effect: ui
          encoder: apps_view
        - effect: ws
          encoder: apps
  encoders:
    app_table_item_view:
      view:
        tag: "tr"
        attrs:
          key:
            key: name
            in: item
        children:
          - tag: td
            children:
              - tag: a
                attrs:
                  class: "c-hand"
                  onclick:
                    encoder: app_selection
                children:
                  - text:
                      key: name
                      in: item
          - tag: td
            attrs:
              class: "text-right"
            children:
              - tag: span
                attrs:
                  class: "label label-rounded"
                children:
                  - text:
                      key: category
                      in: item
    apps_table_view:
      view:
        view: table
        params:
          object:
            headers:
              list:
                - object:
                    title: 
                      text:
                        literal: " "
                - object:
                    title:
                      text: 
                        literal: " "
            items:
              key: data
            item_view:
              keyword: app_table_item_view
                    
    apps_main_view:
      view:
        tag: div
        attrs:
          class: "card"
        children:
          - tag: h1
            attrs:
              class: "content-view"
            children:
              - text:
                  literal: "Apps"
          - view: apps_table_view
            params:
              object:
                data:
                  key: data
    apps_view: 
      view:
        view: layout
        params:
          object:
            theme:
              key: theme
            message:
              key: message
            content_view:
              keyword: apps_main_view
            contents:
              key: apps
            sidebar:
              keyword: admin_sidebar
    apps:
      object: 
        action:
          keyword: apps
    nodes:
      object: 
        action:
          keyword: nodes
    app_selection:
      object:
        name:
          keyword: show_app
        app:
          key: item 
  decoders:
    show_apps:
      object:
        effect:
          keyword: ui
        event:
          text:
            literal: "apps"
    apps:
      object:
        effect:
          keyword: ws
        data:
          object:
            type: 
              text: 
                literal: apps
            data:
              list:
                object:
                  name: 
                    text: any
                  category:
                    text: any

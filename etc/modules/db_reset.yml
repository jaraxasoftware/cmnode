version: 1.0
type: module
category: server
name: db_reset 
spec:
  decoders:
    reset:
      object:
        action:
          text: 
            literal: "reset"
        token:
          config: key
    success:
      object:
        all_deleted:
          keyword: true 
  encoders:
    buckets_to_clear:
      object:
        buckets:
          config: databases
    success:
      object:
        status:
          keyword: ok 
  update:
    reset:
      cmds:
        - effect: db_reset
          encoder: buckets_to_clear
    success:
      cmds:
        - effect: notify
          encoder: success

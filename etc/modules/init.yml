type: module 
name: init 
spec:
  decoders:
    init:
      object:
        method: POST
        headers:
          app:
            any: text
          authorization:
            config:
              key: admin.secret
    success:
      object:
        status:
          keyword: ok
    error:
      object:
        status:
          other_than:
            keyword: ok
  update:
    init:
      model:
        app:
          key: 
            key: headers.app
          in:
            config:
              key: apps
      cmds:
        - effect: db
          encoder: init
    success:
      cmds:
        - effect: notify
          encoder: success
    error:
      cmds:
        - effect: notify
          encoder: error
  encoders:
    init:
      context: init
      bucket:
        keyword:
          key: app.db
      reset: {}
    error:
      object:
        status: 500
        headers:
          content-type: application/json
        body:
          object: {}
    success:
      object:
        status: 201
        headers:
          content-type: application/json
        body:
          object: {}


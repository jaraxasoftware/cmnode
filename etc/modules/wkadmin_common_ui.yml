version: 1.0
type: module
category: ui
name: wkadmin_common_ui
spec:
  encoders:
    carousel_locator_view:
      view:
        tag: input
        attrs:
          class: "carousel-locator"
          id:
            key: id
            in: item
          type: "radio"
          name: "carousel-radio"
          hidden: ""
    carousel_checked_locator_view:
      view:
        tag: input
        attrs:
          class: "carousel-locator"
          id:
            key: id
            in: item
          type: "radio"
          name: "carousel-radio"
          hidden: ""
          checked: ""
    carousel_nav_item_view:
      view:
        tag: label
        attrs:
          class: "nav-item text-hide c-hand"
          for:
            key: id
            in: item
    carousel_nav_view:
      view:
        tag: div
        attrs:
          class: "carousel-nav"
        children:
          loop:
            key: items
          with: carousel_nav_item_view
    carousel_item_view:
      view:
        tag: figure
        attrs:
          class: "carousel-item"
        children: 
          - tag: label
            attrs:
              class: "item-prev btn btn-action btn-lg"
              for:
                key: id
                in: item
            children:
              - tag: i
                attrs:
                  class: "icon icon-arrow-left"
          - tag: label
            attrs:
              class: "item-next btn btn-action btn-lg"
              for:
                key: id
                in: item
            children:
              - tag: i
                attrs:
                  class: "icon icon-arrow-right"
          - tag: img
            attrs:
              class: "img-responsive rounded"
              src:
                format:
                  pattern: "~a/?id=~a"
                  params:
                    - key: assets
                    - key: id
                      in: item
              alt:
                key: title
                in: item
    carousel_container_view:
      view:
        tag: div
        attrs:
          class: "carousel-container"
        children:
          loop:
            key: items
          with: carousel_item_view
    carousel_view:
      view:
        tag: figure
        attrs:
          class: "carousel"
        children:
          merged_list:
            - loop:
                 key: images
              with: 
                either:
                  - when:
                      eq:
                        - number: 0
                        - number: 0 
                    keyword: carousel_checked_locator_view
                  - keyword: carousel_locator_view
            - list:
                - view: carousel_container_view
                  params:
                    object:
                      items:
                        key: images
                - view: carousel_nav_view
                  params:
                    object:
                      items:
                        key: images
    review_map_view:
      view:
        view: location_map_view
        params:
          object:
            id:
              key: id
            lon:
              key: lon
            lat:
              key: lat
    location_map_view:
      view:
        map:
          id:
            key: id
          style: dark
          center:
            lat:
              key: lat
            lon:
              key: lon
          zoom: 9
          markers:
            - lat:
                key: lat
              lon:
                key: lon
    cover_image_view:
      view:
        tag: div
        attrs:
          class: "cover-image"
          style:
            text:
              format: 
                pattern: "background-image: url('~a/?id=~a&size=big')"
                params:
                  - key: assets
                  - key: id
    gallery_thumb_view:
      view:
        tag: div
        attrs:
          class: "column col-2 gallery-thumb c-hand"
          onclick:
            object:
              name: 
                keyword: select_image
              id:
                key: id
                in: item
        children:
          - tag: img
            attrs:
              style: "max-width: 100%;"
              src:
                format:
                  pattern: "~a/?id=~a&size=avatar"
                  params:
                    - key: assets
                    - key: id
                      in: item
    gallery_selected_view:
      view:
        tag: div
        attrs:
          class: "gallery-selected column col-12"
          style: "max-height: 320px;"
        children:
          - view: cover_image_view
            params:
              object:
                id:
                  key: selected
    gallery_view:
      view:
        tag: div
        attrs:
          class: "gallery"
        children:
          - tag: div
            attrs:
              class: "columns"
            children:
              - view: gallery_selected_view
                params:
                  object:
                    selected:
                      key: selected
          - tag: div
            attrs:
              class: "mt-2 columns"
            children:
              loop:
                key: images
              with: gallery_thumb_view
    avatar_view:
      view:
        tag: figure
        attrs:
          class:
            format:
              pattern: "avatar avatar-~a c-hand"
              params:
                - key: size
          data-initial:
            key: initials
          onclick:
            object:
              name: "show-user"
              id: "ebca3cd4-8a5c-42bd-8676-6a1cc7e085c9"
        children:
          - tag: i
            attrs:
              class: "avatar-presence online"
    weekonekt_admin_layout:
      view:
        tag: div
        attrs:
          id: "layout"
          class:
            format:
              pattern: "~a container plop"
              params:
                - key: theme
          key: "weekonekt-admin-layout"
        children:
          - tag: div
            attrs:
              class: "mt-2"
              id: "menu"
              key: "menu"
            children:
              - view: weekonekt_admin_toolbar
                params:
                  selected:
                    key: selected
          - tag: div
            attrs:
              id: "main"
              key: "main"
            children:
              - view: user_message
                params:
                  object:
                    message:
                      maybe:
                        key: message
              
              - tag: div
                attrs:
                  class: "card"
                  style: "padding: 15px !important"
                children:
                  - view:
                      key: content_view
                    params:
                      object:
                        data:
                          maybe:
                            key: contents
    selectable_icon:
      view:
        tag: li
        attrs:
          class: 
            either:
              - when:
                  eq:
                    - key: selected 
                    - key: name
                text: "tab-item active"
              - text: "tab-item"
          key:
            key: name
        children:
          - tag: a
            attrs:
              class: "link c-hand"
              href: "#"
              onclick:
                key: name
            children:
              - tag: i
                attrs:
                  class:
                    key: style
              - tag: span
                attrs:
                  class: "mx-2"
                children:
                  - text: 
                      key: title
    weekonekt_admin_toolbar:
      view:
        tag: ul 
        attrs:
          class: "tab toolbar"
          key: "toolbar"
        children:
          - view: selectable_icon
            params:
              object:
                name: "reviews"
                style: "far fa-edit"
                title: "Reviews"
                selected:
                  key: selected
          - view: selectable_icon
            params:
              object:
                name: "categories"
                style: "fas fa-sitemap"
                title: "Categories"
                selected:
                  key: selected
          - tag: li
            attrs:
              class: "tab-item tab-action"
            children:
              - view: avatar_view
                params:
                  object:
                    size: "rg"
                    initials: "MM"
              - tag: button
                attrs:
                  style: "position: relative; top: -3px;"
                  class: "btn btn-sm btn-primary mx-2"
                children:
                  - text: "Logout"

version: 1.0
type: module
category: ui
name: weekonekt_admin_reviews_ui
spec:
  init:
    model:
      reviews: []
      theme: "dark"
  decoders:
    ready:
      object:
        effect:
          keyword: events
        event:
          keyword: user_logged_in
    show_reviews:
      object:
        effect:
          keyword: ui
        event:
          one_of:
            - keyword: reviews
            - text: reviews
  update:
    ready:
      model:
        reviews:
          list:
            - object:
                id:
                  text: "1234"
                title: 
                  text: "Expedition Bali 4x4 - Mount Batur - Bali"
                date: 63671174497000
                highlights:
                  text: "Pure Blast! This was probably one of my favouri..."
                location:
                  object:
                    lat: -8.2401299
                    lon: 115.3774944
      cmds:
        - effect: ws
          encoder: reviews_query
        - effect: ui
          encoder: reviews_view
    show_reviews:
      model:
        reviews:
          list:
            - object:
                id:
                  text: "1234"
                title: 
                  text: "Expedition Bali 4x4 - Mount Batur - Bali"
                date: 63671174497000
                highlights:
                  text: "Pure Blast! This was probably one of my favouri..."
                location:
                  object:
                    lat: -8.2401299
                    lon: 115.3774944
      cmds:
        - effect: ws
          encoder: reviews_query
        - effect: ui
          encoder: reviews_view
  encoders:
    reviews_query:
      object:
        app:
          text: "weekonekt"
        action:
          text: "reviews"
    review_item_view:
      view:
        tag: div
        attrs:
          class: "columns"
          key:
            key: id
            in: item
        children:
          - tag: div
            attrs:
              class: "column col-8"
            children:
              - tag: h3
                children:
                  - text:
                      key: title
                      in: item
              - tag: span
                children:
                  - text:
                      key: highlights
                      in: item
          - tag: div
            attrs:
              class: "column col-4"
            children:
              - map:
                  id: "map"
                  style: dark
                  center:
                    lat:
                      key: lat
                      in: 
                        key: location
                        in: item
                    lon:
                      key: lon
                      in: 
                        key: location
                        in: item
                  zoom: 9
                  markers:
                    - lat:
                        key: lat
                        in: 
                          key: location
                          in: item
                      lon:
                        key: lon
                        in: 
                          key: location
                          in: item
    
    reviews_collection_view:
      view:
        tag: div
        children:
          loop:
            key: reviews
          with: review_item_view
    reviews_main_view:
      view:
        tag: div
        attrs:
          class: "card mt-2"
        children:
          - tag: h1
            children:
              - text: "Reviews"
          - view: reviews_collection_view
            params:
              object:
                reviews:
                  key: reviews
    reviews_actions_view:
      view:
        tag: div
        attrs:
          class: "text-right"
        children:
          - tag: a
            attrs:
              class: "link c-hand"
            children:
              - text: 
                  literal: "Create new"
    reviews_layout_view:
      view:
        tag: div
        attrs:
          key: "reviews"
        children:
          - view: reviews_actions_view
          - view: reviews_main_view
            params:
              object:
                reviews:
                  key: data
    reviews_view: 
      view:
        view: layout
        params:
          object:
            theme:
              key: theme
            message:
              key: message
            content_view:
              keyword: reviews_layout_view
            contents:
              key: reviews
            sidebar:
              keyword: weekonekt_admin_sidebar
    weekonekt_admin_sidebar:
      view:
        tag: div
        attrs:
          class: "text-center"
          key: "sidebar"
        children:
          - view: sidebar_icon
            params:
              object:
                name: "reviews"
                style: "fa fa-4x fa-pencil-square-o"
                title: "Reviews"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-picture-o"
                title: "Photos"
          - view: sidebar_icon
            params:
              object:
                name: "places"
                style: "fa fa-4x fa-map-marker"
                title: "Places"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-sitemap"
                title: "Categories"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-users"
                title: "Users"
          - view: sidebar_icon
            params:
              object:
                name: "import"
                style: "fa fa-4x fa-cloud-upload"
                title: "Import"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-bug"
                title: "Bugs"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-power-off"
                title: "Logout"





                

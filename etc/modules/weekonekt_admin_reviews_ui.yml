version: 1.0
type: module
category: ui
name: weekonekt_admin_reviews_ui
spec:
  init:
    model:
      reviews: []
      theme: "dark"
  decoders:
    ready:
      object:
        effect:
          keyword: events
        event:
          keyword: user_logged_in
    show_reviews:
      object:
        effect:
          keyword: ui
        event:
          one_of:
            - keyword: reviews
            - text: reviews
    reviews:
      object:
        effect:
          keyword: ws
        data:
          object:
            reviews:
              list:
                object:
                  date: 
                    any: number
                  id:
                    any: text
                  lat:
                    any: number
                  lon:
                    any: number
                  title:
                    any: text
                  images:
                    any: list
  update:
    ready:
      model:
        reviews: []
      cmds:
        - effect: ws
          encoder: reviews_query
        - effect: ui
          encoder: reviews_view
    show_reviews:
      model:
        reviews: []
      cmds:
        - effect: ws
          encoder: reviews_query
        - effect: ui
          encoder: reviews_view
    reviews:
      model:
        reviews:
          key: reviews
          in: data
      cmds:
        - effect: ui
          encoder: reviews_view
  encoders:
    reviews_query:
      object:
        app:
          text: "weekonekt"
        action:
          text: "reviews"
    review_location_map_view:
      view:
        map:
          id:
            key: id
          style: dark
          center:
            lat:
              key: lat
            lon:
              key: lon
          zoom: 9
          markers:
            - lat:
                key: lat
              lon:
                key: lon
    review_leading_image_view:
      view:
        tag: img
        attrs:
          src:
            text:
              format:
                pattern: "~a/?id=~a"
                params:
                  - key: assets
                  - key: id
    review_item_view:
      view:
        tag: div
        attrs:
          class: "columns"
          key:
            key: id
            in: item
        children:
          - tag: div
            attrs:
              class: "column col-8"
            children:
              - tag: h3
                children:
                  - text:
                      key: title
                      in: item
              - view: review_leading_image_view
                params:
                  id: 
                    key: id
                    in: item
    reviews_collection_view:
      view:
        tag: div
        children:
          loop:
            key: reviews
          with: review_item_view
    reviews_main_view:
      view:
        tag: div
        attrs:
          class: "card mt-2"
        children:
          - tag: h1
            children:
              - text: "Reviews"
          - view: reviews_collection_view
            params:
              object:
                reviews:
                  key: reviews
    reviews_actions_view:
      view:
        tag: div
        attrs:
          class: "text-right"
        children:
          - tag: a
            attrs:
              class: "link c-hand"
            children:
              - text: 
                  literal: "Create new"
    reviews_layout_view:
      view:
        tag: div
        attrs:
          key: "reviews"
        children:
          - view: reviews_actions_view
          - view: reviews_main_view
            params:
              object:
                reviews:
                  key: data
    reviews_view: 
      view:
        view: layout
        params:
          object:
            theme:
              key: theme
            message:
              key: message
            content_view:
              keyword: reviews_layout_view
            contents:
              key: reviews
            sidebar:
              keyword: weekonekt_admin_sidebar
    weekonekt_admin_sidebar:
      view:
        tag: div
        attrs:
          class: "text-center"
          key: "sidebar"
        children:
          - view: sidebar_icon
            params:
              object:
                name: "reviews"
                style: "fa fa-4x fa-pencil-square-o"
                title: "Reviews"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-picture-o"
                title: "Photos"
          - view: sidebar_icon
            params:
              object:
                name: "places"
                style: "fa fa-4x fa-map-marker"
                title: "Places"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-sitemap"
                title: "Categories"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-users"
                title: "Users"
          - view: sidebar_icon
            params:
              object:
                name: "import"
                style: "fa fa-4x fa-cloud-upload"
                title: "Import"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-bug"
                title: "Bugs"
          - view: sidebar_icon
            params:
              object:
                name: "apps"
                style: "fa fa-4x fa-power-off"
                title: "Logout"





                

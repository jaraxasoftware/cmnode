version: 1.0
type: task
name: dkv_notifications_release
spec:
  - git:
      credentials:
        key: github
        in: settings
      tag: 
        repo: "github.com/netscale-technologies/dkv-notifications.git"
        branch: master
        clone: true
        dir: "/tmp/dkv-notifications"
        prefix: "v"
        increment:
          key: increment
          in: params
      as: tag
  - docker:
      credentials:
        key: docker
        in: settings
      build:
        dir: "/tmp/dkv-notifications"
        repo: "netcomposer/dkv-notifications"
        tag:
          key: tag
          in: context

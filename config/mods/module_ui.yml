version: 1.0
type: module
category: ui
name: module_ui
spec:
  update:
    show_module:
      model:
        name:
          key: name
          in:
            key: module
            in: event
      cmds:
        - effect: ui
          encoder: module_loading_view
        - effect: ws
          encoder: module
    module:
      model:
        module:
          key: module
          in: data
      cmds:
        - effect: ui
          encoder: module_view
  encoders:
    module:
      object:
        action:
          text:
            literal: module
        module:
          from: name
    module_settings_view:
      view:
        tag: div
        attrs:
          class: "section-view"
        children:
          - tag: h4
            children:
              - text:
                  literal: "Settings"
          - tag: div
            attrs:
              key: "info"
              class: "card"
            children:
              - tag: div
                attrs:
                  class: "card-body columns"
                children:
                  - tag: div
                    attrs:
                      class: "col-3"
                    children:
                      - tag: div
                        children:
                          - tag: strong
                            children:
                              - text:
                                  literal: "Category"
                  - tag: div
                    attrs:
                      class: "col-3"
                    children:
                      - tag: div
                        children:
                          - text:
                              from: category
    module_init_view:
      view:
        tag: div
        attrs:
          class: "section-view"
        children:
          - tag: h4
            children:
              - text:
                  literal: "Init"
          - tag: div
            attrs:
              key: "init"
              class: "card"
            children:
              - tag: div
                attrs:
                  class: "card-body columns"
                children:
                  - tag: div
                    attrs:
                      class: "col-3"
                    children:
                      - tag: div
                        children:
                          - tag: strong
                            children:
                              - text:
                                  literal: "Model"
                      - tag: div
                        children:
                          - tag: strong
                            children:
                              - text:
                                  literal: "Commands"
                  - tag: div
                    attrs:
                      class: "col-9"
                    children: []

    module_update_view:
      view:
        tag: div
        attrs:
          class: "section-view"
        children:
          - tag: h4
            children:
              - text:
                  literal: "Update"
    module_decoders_view:
      view:
        tag: div
        attrs:
          class: "section-view"
        children:
          - tag: h4
            children:
              - text:
                  literal: "Decoders"
    module_encoders_view:
      view:
        tag: div
        attrs:
          class: "section-view"
        children:
          - tag: h4
            children:
              - text:
                  literal: "Encoders"
    module_sections_view:
      view:
        tag: div
        children: 
          - view: module_settings_view
            params:
              object:
                category:
                  key: category
                  in: data
          - view: module_init_view
            params:
              object:
                init:
                  key: init
                  in: data
          - view: module_update_view
            params:
              object:
                init:
                  key: update
                  in: data
          - view: module_decoders_view
            params:
              object:
                init:
                  key: decoders
                  in: data
          - view: module_encoders_view
            params:
              object:
                init:
                  key: encoders
                  in: data
    module_main_view:
      view:
        view: main
        params:
          object:
            title:
              text:
                from: name
                at: data
            view:
              keyword: module_sections_view
            data:
              from: module
              at: data
    loading_view:
      view:
        tag: div
        children:
          - text:
              literal: "Loading..."
    module_loading_main_view:
      view:
        view: main
        params:
          object:
            title:
              text:
                from: name
                at: data
            view:
              keyword: loading_view
            data:
              from: data
    module_view: 
      view:
        view: layout
        params:
          object:
            sidebar:
              keyword: admin_sidebar
            message:
              from: message
            content_view:
              keyword: module_main_view
            contents:
              object:
                name: 
                  from: name
                module:
                  from: module
    module_loading_view:
      view:
        view: layout
        params:
          object:
            message:
              from: message
            content_view:
              keyword: module_loading_main_view
            contents:
              object:
                name: 
                  from: name
            sidebar:
              keyword: admin_sidebar
  decoders:
    show_module:
      object:
        effect:
          keyword: ui
        event:
          object:
            name:
              keyword: show_module
            module:
              object:
                name: 
                  text: any
    module:
      object:
        effect:
          keyword: ws
        data:
          object:
            module: 
              object:
                category:
                  text: any
                update:
                  maybe:
                    entries:
                      list: any
                init:
                  maybe:
                    list: any
                decoders:
                  maybe:
                    list:
                      object:
                        msg:
                          text: any
                        priority:
                          text: any
                encoders:
                  maybe:
                    entries:
                      object:
                        type:
                          text: any


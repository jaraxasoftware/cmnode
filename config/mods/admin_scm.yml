version: 1.0
type: module
category: client
name: admin_scm 
spec:
  init:
    model:
      scheme:
        text: 
          literal: "Hello" 
    cmds:
      - effect: scheme
        encoder: app
  update:
    scheme:
      model:
        scheme: 
          from: source 
      cmds:
        - effect: notify
          encoder: scheme
  encoders:
    app:
      object:
        app:
          spec: 
            init:
              model:
                state: 
                  keyword: init
              cmds:
                - effect: ui 
                  encoder: login 

            update:
              connected:
                model:
                  state:
                    keyword: connected
            encoders:
              login:
                object:
                  username: 
                    from: username
                  password:
                    from: password
              user_message:
                view:
                  tag: div
                  attrs: 
                    key: user-message
                    class: warning
                  children:
                    - text: 
                        from: message 
              input:
                view:
                  tag: div
                  attrs:
                    key: 
                      from: id
                    class: "form-group col-3 col-md-4 col-sm-12 col-xs-12"
                  children:
                    - tag: label
                      attrs:
                        class: "form-label"
                        for: 
                          from: id
                      children:
                        - text: 
                            from: title
                    - tag: input
                      attrs:
                        class: "form-input"
                        type: "text"
                        id: 
                          from: id
                        placeholder: 
                          from: title
              password:
                view:
                  tag: div
                  attrs:
                    key: 
                      from: id
                    class: "form-group col-3 col-md-4 col-sm-12 col-xs-12"
                  children:
                    - tag: label
                      attrs:
                        class: "form-label"
                        for: 
                          from: id
                      children:
                        - text: 
                            from: title
                    - tag: input
                      attrs:
                        class: "form-input"
                        type: "password"
                        id: 
                          from: id
                        placeholder: 
                          from: title
              button:
                view:
                  tag: button
                  attrs:
                    class: "btn btn-primary"
                    onclick:
                      from: click
                  children:
                    - text:
                        from: title
              link:
                view:
                  tag: div
                  attrs:
                    key: 
                      from: id
                  children:
                    - tag: a
                      attrs:
                        href: "#"
                      children:
                        - text: 
                            from: title
              login:
                view:
                  tag: div 
                  attrs:
                    class: container
                  children:
                    - tag: h1
                      attrs:
                        key: title
                      children:
                        - text: "Welcome"
                    - view: user_message
                      when: message
                    - view: input
                      params:
                        object:
                          id: 
                            literal: "email"
                          title:
                            literal: "Email"
                    - view: password 
                      params:
                        object:
                          id: 
                            literal: "password"
                          title:
                            literal: "Password"
                    - tag: div
                      children:
                        - view: button
                          params:
                            object:
                              click:
                                keyword: replop 
                              title:
                                literal: "Login"
                    - view: link
                      params:
                        object:
                          id: 
                            literal: recover_password 
                          title:
                            literal: "Recover password"
                    - view: link
                      params:
                        object:
                          id: 
                            literal: signup
                          title:
                            literal: "Create an account"
                      

            
            decoders:
              connected:
                object:
                  event:
                    literal: "open"
                  source:
                    keyword: ws
            effects:
              ui:
                type: elementary-ui
              ws:
                type: elementary-ws
                settings:
                  url: ws://localhost:8080/ws 
          
    scheme:
      data: 
        from: scheme
  decoders:
    scheme:
      object:
        language:
          keyword: scheme
        status:
          keyword: ok
        source:
          text: any

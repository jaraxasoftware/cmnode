version: 1.0
type: module
category: client
name: admin_scm 
spec:
  init:
    model:
      scheme:
        text: 
          literal: "Hello" 
    cmds:
      - effect: scheme
        encoder: app
  update:
    scheme:
      model:
        scheme: 
          from: source 
      cmds:
        - effect: notify
          encoder: scheme
  encoders:
    app:
      object:
        app:
          spec: 
            init:
              model:
                state: 
                  keyword: init
                message:
                  literal: "Jellow"
              cmds:
                - effect: ws
                  encoder: login
                - effect: ui 
                  encoder: connected 

            update:
              connected:
                model:
                  state:
                    keyword: connected
            encoders:
              login:
                object:
                  username: 
                    from: username
                  password:
                    from: password
              user_message:
                view:
                  tag: div
                  attrs: 
                    key: user-message
                    class: warning
                  children:
                    - text: 
                        from: message 
              connected:
                view:
                  tag: div 
                  attrs:
                    class: container
                  children:
                    - tag: h1
                      attrs:
                        key: title
                      children:
                        - text: "Welcome"
                    - view: user_message
                      when: message
                    - tag: div
                      attrs:
                        key: subtitle
                      children:
                        - text: "This is the subtitle"
                    - tag: a
                      attrs:
                        key: link
                        href: "#"
                      children:
                        - text: "this is a link"
            
            decoders:
              connected:
                object:
                  event:
                    literal: "open"
                  source:
                    keyword: ws
            effects:
              ui:
                type: elementary-ui
              ws:
                type: elementary-ws
                settings:
                  url: ws://localhost:8080/ws 
          
    scheme:
      data: 
        from: scheme
  decoders:
    scheme:
      object:
        language:
          keyword: scheme
        status:
          keyword: ok
        source:
          text: any
